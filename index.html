<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>BSLEEPY ‚Äî Quiz (Tema Escuro)</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
/* ---------- RESET / BASE ---------- */
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  font-family:'Poppins',sans-serif;
  background:linear-gradient(180deg,#0b0710 0%, #12061a 100%);
  color:#fff;
  display:flex;
  justify-content:center;
  padding:18px 12px;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}
/* app container */
.app{
  width:100%;
  max-width:420px;
  min-height:100vh;
  background:transparent;
  position:relative;
  overflow:hidden;
  border-radius:20px;
}

/* subtle particle background */
.bg-dots{
  position:absolute;inset:0;
  background-image:
   radial-gradient(rgba(255,255,255,0.02) 1px, transparent 1px);
  background-size: 40px 40px;
  opacity:0.06;pointer-events:none;
  transform:translateZ(0);
}

/* top bar (hidden on intro) */
.topbar{
  height:64px;display:flex;align-items:center;gap:12px;padding:10px 14px;
  backdrop-filter: blur(6px);
  position:relative; z-index:4;
}
.top-left{
  width:44px;height:44px;border-radius:12px;display:flex;align-items:center;justify-content:center;
  background:rgba(255,255,255,0.03);cursor:pointer;
}
.progress-wrap{flex:1;height:8px;border-radius:999px;background:rgba(255,255,255,0.04);overflow:hidden}
.progress{height:100%;width:0;background:linear-gradient(90deg,#6f46ff,#5c32e5);transition:width .36s cubic-bezier(.2,.9,.25,1)}

/* screens */
.screen{
  position:absolute;left:0;right:0;top:64px;bottom:0;padding:24px;overflow:auto;
  transform:translateX(12%);opacity:0;pointer-events:none;transition:all .42s cubic-bezier(.2,.9,.25,1);
}
.screen.active{transform:translateX(0);opacity:1;pointer-events:all}
.screen.left{transform:translateX(-8%);opacity:0}
.header{
  text-align:center;margin-top:6px;margin-bottom:14px;
}
.header h1{font-size:22px;letter-spacing:0.2px;margin-bottom:8px}
.header p{color:rgba(255,255,255,0.72);font-size:13px}

/* intro */
.intro-card{
  margin-top:22px;border-radius:16px;padding:22px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));
  box-shadow:0 10px 30px rgba(10,6,20,0.35);
  display:flex;flex-direction:column;align-items:center;gap:12px;
}
.logo{
  width:112px;height:112px;border-radius:18px;background:linear-gradient(180deg,#5C32E5,#8A5CFF);
  display:flex;align-items:center;justify-content:center;font-weight:800;font-size:28px;color:#fff;
  box-shadow:0 18px 50px rgba(92,50,229,0.16);
}

/* card */
.card{
  margin-top:18px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border-radius:14px;padding:16px;box-shadow:0 8px 26px rgba(5,5,10,0.28);
}

/* inputs & options */
.input{
  width:100%;padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:#fff;
  font-size:15px;outline:none;
}
.options{display:flex;flex-direction:column;gap:12px;margin-top:8px}
.option{
  padding:14px;border-radius:12px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);
  display:flex;align-items:center;justify-content:space-between;cursor:pointer;font-weight:600;
  transition:all .16s;
}
.option .label{color:rgba(255,255,255,0.92)}
.option:hover{transform:translateY(-4px)}
.option.selected{background:linear-gradient(90deg,#6f46ff,#5c32e5);box-shadow:0 10px 30px rgba(92,50,229,0.12);border-color:rgba(255,255,255,0.06);color:#fff}

/* footer for navigation -> shows after start */
.footer{
  position:fixed;left:0;right:0;bottom:18px;display:flex;gap:14px;padding:12px 18px;align-items:center;
  justify-content:space-between;max-width:420px;margin:0 auto;z-index:40;
  pointer-events:all;
}
.btn{
  padding:13px 18px;border-radius:12px;font-weight:700;border:0;cursor:pointer;
}
.btn.ghost{background:transparent;color:#fff;border:1px solid rgba(255,255,255,0.06)}
.btn.primary{background:linear-gradient(90deg,#6f46ff,#5c32e5);color:#fff;box-shadow:0 12px 30px rgba(92,50,229,0.14)}
.btn.disabled{opacity:.45;cursor:not-allowed}

/* result dashboard */
.grid{
  display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:12px;
}
.stat{
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  padding:12px;border-radius:12px;text-align:center;
}
.big{
  grid-column:1/-1;padding:16px;display:flex;align-items:center;justify-content:space-between;
  gap:12px;
}
.stat h3{font-size:13px;color:rgba(255,255,255,0.75)}
.stat p{font-weight:700;font-size:18px;margin-top:6px}

/* plans modal (bottom sheet) */
.modal{
  position:fixed;left:0;right:0;bottom:0;padding:18px;border-top-left-radius:18px;border-top-right-radius:18px;
  background:linear-gradient(180deg,#0b0811,#0f0718);box-shadow:0 -20px 60px rgba(5,5,10,0.6);transform:translateY(120%);
  transition:transform .36s cubic-bezier(.2,.9,.25,1);z-index:90;
}
.modal.open{transform:translateY(0)}
.plan{
  display:flex;justify-content:space-between;align-items:center;padding:14px;border-radius:12px;margin-bottom:10px;
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.04);
}
.plan.selected{box-shadow:0 18px 40px rgba(92,50,229,0.12);border:1px solid rgba(92,50,229,0.18)}

/* small text */
.small{font-size:12px;color:rgba(255,255,255,0.7)}
.center{text-align:center}

/* accessibility fixes */
[aria-hidden="true"]{display:none}

/* responsive tweaks */
@media (max-width:420px){
  .header h1{font-size:20px;}
  .topbar{height:72px}
  .screen{top:72px}
}
</style>
</head>
<body>
  <div class="app" role="application" aria-label="BSLEEPY Quiz">
    <div class="bg-dots" aria-hidden="true"></div>

    <!-- TOP BAR (starts hidden, shown once quiz starts) -->
    <div id="topbar" class="topbar" style="display:none">
      <div id="backIcon" class="top-left" title="Voltar">&#8249;</div>
      <div class="progress-wrap" role="progressbar" aria-valuemin="0" aria-valuemax="100">
        <div id="progress" class="progress" style="width:0%"></div>
      </div>
    </div>

    <!-- SCREENS -->
    <!-- Intro screen -->
    <div id="intro" class="screen active" style="top:0; padding-top:40px;">
      <div class="header center">
        <h1 style="color:#fff">BSLEEPY</h1>
        <p>Seu guia inteligente para noites melhores</p>
      </div>

      <div class="intro-card card" style="margin:22px 8px;">
        <div class="logo">BS</div>
        <div style="font-weight:700;font-size:18px">Sono mais profundo. Vida melhor.</div>
        <div class="small" style="color:rgba(255,255,255,0.68);text-align:center">Responda um r√°pido quiz e receba um resumo gratuito com dicas f√°ceis de aplicar.</div>
        <button id="startBtn" class="btn primary" style="width:100%;margin-top:16px">Come√ßar Agora</button>
      </div>

      <div class="card" style="margin:12px 8px;padding:14px;">
        <div style="display:flex;align-items:center;gap:12px">
          <div style="flex:1">
            <div style="font-weight:700">10k+ usu√°rios</div>
            <div class="small" style="margin-top:6px">Milhares de pessoas j√° melhoraram seu sono com a BSleepy</div>
          </div>
          <div style="width:64px;height:64px;border-radius:10px;background:rgba(255,255,255,0.02);display:flex;align-items:center;justify-content:center">‚òÖ</div>
        </div>
      </div>
    </div>

    <!-- Q1: Nome -->
    <div id="q1" class="screen" aria-hidden="true">
      <div class="header">
        <h1>Qual √© o seu nome?</h1>
        <p>Vamos personalizar o resultado.</p>
      </div>
      <div class="card">
        <input id="nameInput" class="input" type="text" placeholder="Ex: Ana" aria-label="Nome">
      </div>
    </div>

    <!-- Q2: Idade -->
    <div id="q2" class="screen" aria-hidden="true">
      <div class="header">
        <h1>Qual sua idade?</h1>
        <p>A idade ajuda a refinar as recomenda√ß√µes.</p>
      </div>
      <div class="card">
        <input id="ageInput" class="input" type="number" min="10" max="120" placeholder="Ex: 28" aria-label="Idade">
      </div>
    </div>

    <!-- Q3: Peso -->
    <div id="q3" class="screen" aria-hidden="true">
      <div class="header">
        <h1>Qual √© seu peso (kg)?</h1>
        <p>Opcional ‚Äî afeta sugest√µes de atividade.</p>
      </div>
      <div class="card">
        <input id="weightInput" class="input" type="number" min="20" max="400" placeholder="Ex: 72" aria-label="Peso">
      </div>
    </div>

    <!-- Q4: Ins√¥nia -->
    <div id="q4" class="screen" aria-hidden="true">
      <div class="header">
        <h1>Voc√™ tem dificuldade para pegar no sono?</h1>
        <p>Escolha a melhor op√ß√£o.</p>
      </div>
      <div class="card">
        <div id="insomnia" class="options">
          <div class="option" data-val="freq"><span class="label">Sim, frequentemente</span></div>
          <div class="option" data-val="ocas"><span class="label">√Äs vezes</span></div>
          <div class="option" data-val="nao"><span class="label">N√£o</span></div>
        </div>
      </div>
    </div>

    <!-- Q5: Uso do celular -->
    <div id="q5" class="screen" aria-hidden="true">
      <div class="header">
        <h1>Voc√™ usa celular antes de dormir?</h1>
        <p>Isso influencia a qualidade do sono.</p>
      </div>
      <div class="card">
        <div id="phone" class="options">
          <div class="option" data-val="sempre"><span class="label">Sempre</span></div>
          <div class="option" data-val="asvezes"><span class="label">√Äs vezes</span></div>
          <div class="option" data-val="nunca"><span class="label">Raramente / Nunca</span></div>
        </div>
      </div>
    </div>

    <!-- Q6: Horas de sono -->
    <div id="q6" class="screen" aria-hidden="true">
      <div class="header">
        <h1>Quantas horas dorme por noite em m√©dia?</h1>
        <p>Estimativa semanal.</p>
      </div>
      <div class="card">
        <div id="hours" class="options">
          <div class="option" data-val="lt5"><span class="label">Menos de 5h</span></div>
          <div class="option" data-val="5_7"><span class="label">Entre 5h e 7h</span></div>
          <div class="option" data-val="gt7"><span class="label">Mais de 7h</span></div>
        </div>
      </div>
    </div>

    <!-- Q7: Acorda descansado -->
    <div id="q7" class="screen" aria-hidden="true">
      <div class="header">
        <h1>Voc√™ acorda se sentindo descansado?</h1>
        <p>R√°pido e objetivo.</p>
      </div>
      <div class="card">
        <div id="rested" class="options">
          <div class="option" data-val="sim"><span class="label">Sim</span></div>
          <div class="option" data-val="asvezes"><span class="label">√Äs vezes</span></div>
          <div class="option" data-val="nao"><span class="label">N√£o</span></div>
        </div>
      </div>
    </div>

    <!-- RESULT SCREEN -->
    <div id="result" class="screen" aria-hidden="true">
      <div class="header center">
        <h1 id="resultTitle">Seu resumo gratuito</h1>
        <p id="resultSubtitle">Sugest√µes r√°pidas para melhorar sua noite</p>
      </div>

      <div class="big card">
        <div>
          <div style="font-weight:800;font-size:18px" id="greetName">Ol√°!</div>
          <div class="small" id="greetSub">Analisando suas respostas...</div>
        </div>
        <div style="width:92px;height:92px">
          <canvas id="chartSleep" width="92" height="92"></canvas>
        </div>
      </div>

      <div class="grid">
        <div class="stat">
          <h3>Horas</h3>
          <p id="statHours">‚Äî</p>
        </div>
        <div class="stat">
          <h3>Ins√¥nia</h3>
          <p id="statInsomnia">‚Äî</p>
        </div>
        <div class="stat">
          <h3>Uso do celular</h3>
          <p id="statPhone">‚Äî</p>
        </div>
        <div class="stat">
          <h3>Acordar</h3>
          <p id="statRest">‚Äî</p>
        </div>
      </div>

      <div class="card" style="margin-top:14px">
      <!-- BOT√ÉO PARA MOSTRAR PLANOS -->
<div style="margin-top:18px;text-align:center">
  <button id="seePlansBtn" class="btn primary" style="width:100%">Ver planos premium</button>
</div>
        <div style="font-weight:700">Dicas r√°pidas</div>
        <ul style="margin-top:10px;list-style:none;padding-left:0;color:rgba(255,255,255,0.82)">
          <li style="margin-bottom:8px">‚Ä¢ Evite telas 60 min antes de dormir.</li>
          <li style="margin-bottom:8px">‚Ä¢ Mantenha hor√°rio fixo para deitar e acordar.</li>
          <li style="margin-bottom:8px">‚Ä¢ Reduza cafe√≠na ap√≥s 16h.</li>
        </ul>
      </div>
    </div>

    <!-- FOOTER NAV (hidden until quiz starts) -->
    <div id="footer" class="footer" style="display:none">
      <button id="backBtn" class="btn ghost">Voltar</button>
      <button id="nextBtn" class="btn primary disabled">Continuar</button>
    </div>

    <!-- PLANS MODAL -->
    <div id="plans" class="modal" aria-hidden="true">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
        <div>
          <div style="font-weight:800;font-size:18px">Monitore diariamente</div>
          <div class="small" style="margin-top:6px">Plano com rotinas personalizadas e acompanhamento</div>
        </div>
        <div style="font-weight:800">R$ 12,49</div>
      </div>

      <div id="planAnnual" class="plan selected">
        <div>
          <div style="font-size:12px;background:#5c32e5;padding:6px 8px;border-radius:999px;display:inline-block;margin-bottom:6px">MAIS POPULAR</div>
          <div style="font-weight:700">Plano Anual</div>
          <div class="small">Pagamento √∫nico ‚Äî melhor custo</div>
        </div>
        <div style="text-align:right">
          <div style="font-weight:800">R$ 12,49</div>
          <div class="small">/ m√™s</div>
        </div>
      </div>

      <div id="planMonthly" class="plan">
        <div>
          <div style="font-weight:700">Plano Mensal</div>
          <div class="small">Cancele a qualquer momento</div>
        </div>
        <div style="text-align:right">
          <div style="font-weight:800">R$ 37,90</div>
          <div class="small">/ m√™s</div>
        </div>
      </div>

      <button id="buyBtn" class="btn primary" style="width:100%;margin-top:8px">COME√áAR MINHA JORNADA üîí</button>
      <div style="display:flex;gap:14px;justify-content:center;margin-top:12px">
        <a href="#" class="small" style="color:rgba(255,255,255,0.6)">Termos</a>
        <a href="#" class="small" style="color:rgba(255,255,255,0.6)">Privacidade</a>
      </div>
    </div>

  </div>

<script>
/* ---------- State & elements ---------- */
const steps = ['intro','q1','q2','q3','q4','q5','q6','q7','result'];
let step = 0;
const answers = { name:'', age:'', weight:'', insomnia:'', phone:'', hours:'', rested:'' };

/* DOM */
const topbar = document.getElementById('topbar');
const progress = document.getElementById('progress');
const footer = document.getElementById('footer');
const backIcon = document.getElementById('backIcon');
const startBtn = document.getElementById('startBtn');
const nextBtn = document.getElementById('nextBtn');
const backBtn = document.getElementById('backBtn');

/* screen elements */
function screenEl(id){ return document.getElementById(id); }
const nameInput = document.getElementById('nameInput');
const ageInput = document.getElementById('ageInput');
const weightInput = document.getElementById('weightInput');

const insomniaOpts = document.getElementById('insomnia');
const phoneOpts = document.getElementById('phone');
const hoursOpts = document.getElementById('hours');
const restedOpts = document.getElementById('rested');

const resultTitle = document.getElementById('resultTitle');
const greetName = document.getElementById('greetName');
const greetSub = document.getElementById('greetSub');
const statHours = document.getElementById('statHours');
const statInsomnia = document.getElementById('statInsomnia');
const statPhone = document.getElementById('statPhone');
const statRest = document.getElementById('statRest');

const plansModal = document.getElementById('plans');
const buyBtn = document.getElementById('buyBtn');
const planAnnual = document.getElementById('planAnnual');
const planMonthly = document.getElementById('planMonthly');

/* chart */
let sleepChart = null;

/* ---------- Helpers ---------- */
function showStep(i){
  // bounds
  if(i < 0) i = 0;
  if(i >= steps.length) i = steps.length - 1;
  step = i;

  // show/hide topbar & footer: topbar & footer appear after intro
  if(steps[step] === 'intro'){
    topbar.style.display = 'none'; footer.style.display = 'none';
  } else {
    topbar.style.display = 'flex'; footer.style.display = 'flex';
  }

  // update screens visibility
  steps.forEach(s => {
    const el = screenEl(s);
    if(!el) return;
    el.classList.remove('active');
    el.setAttribute('aria-hidden','true');
  });
  const curr = screenEl(steps[step]);
  if(curr){
    curr.classList.add('active');
    curr.setAttribute('aria-hidden','false');
  }

  // update progress width
  const pct = Math.round((step) / (steps.length - 1) * 100);
  progress.style.width = pct + '%';

  // update back button disabled if on intro
  if(step === 0){ backBtn.disabled = true; backBtn.classList.add('btn-disabled'); }
  else { backBtn.disabled = false; backBtn.classList.remove('btn-disabled'); }

  // validate to enable/disable next button
  validateCurrent();
  // scroll top for mobile smoothness
  window.scrollTo({top:0,behavior:'smooth'});
}

function nextStep(){
  if(!validateCurrent()) return;
  if(step < steps.length - 1) showStep(step + 1);
  // when reaching 'result', render it
  if(steps[step] === 'result') renderResult();
}

function prevStep(){
  if(step > 0) showStep(step - 1);
}

/* ---------- Validation logic (prevents continue) ---------- */
function validateCurrent(){
  const curr = steps[step];
  let ok = false;
  if(curr === 'intro') ok = true;
  if(curr === 'q1') ok = (nameInput.value.trim().length >= 2);
  if(curr === 'q2') ok = (ageInput.value && Number(ageInput.value) >= 10);
  if(curr === 'q3') ok = (!weightInput.value || (Number(weightInput.value) >= 20 && Number(weightInput.value) < 400)); // optional
  if(curr === 'q4') ok = !!answers.insomnia;
  if(curr === 'q5') ok = !!answers.phone;
  if(curr === 'q6') ok = !!answers.hours;
  if(curr === 'q7') ok = !!answers.rested;
  if(curr === 'result') ok = true;
  // toggle next button
  if(ok){ nextBtn.classList.remove('disabled'); nextBtn.disabled = false; } else { nextBtn.classList.add('disabled'); nextBtn.disabled = true; }
  return ok;
}

/* ---------- Wire inputs/options ---------- */
startBtn.addEventListener('click', ()=>{
  // jump to q1
  showStep(1);
});
backBtn.addEventListener('click', ()=> prevStep());
backIcon.addEventListener('click', ()=> prevStep());
nextBtn.addEventListener('click', ()=> nextStep());

// inputs
nameInput.addEventListener('input', ()=>{ validateCurrent(); });
ageInput.addEventListener('input', ()=>{ validateCurrent(); });
weightInput.addEventListener('input', ()=>{ validateCurrent(); });

// options generic wiring
function wireOptions(container, key){
  container.querySelectorAll('.option').forEach(o=>{
    o.addEventListener('click', ()=>{
      // remove all selected
      container.querySelectorAll('.option').forEach(x=>x.classList.remove('selected'));
      o.classList.add('selected');
      answers[key] = o.getAttribute('data-val');
      validateCurrent();
    });
  });
}
wireOptions(insomniaOpts,'insomnia');
wireOptions(phoneOpts,'phone');
wireOptions(hoursOpts,'hours');
wireOptions(restedOpts,'rested');

/* ---------- Render result ---------- */
function renderResult(){
  // capture last inputs
  answers.name = nameInput.value.trim() || 'Amigo';
  answers.age = ageInput.value.trim();
  answers.weight = weightInput.value.trim();

  // friendly texts and stats
  greetName.innerText = `Ol√°, ${answers.name}!`;
  greetSub.innerText = `Resumo r√°pido com base nas suas respostas`;

  // map hours label
  const hoursMap = { 'lt5':'<5h', '5_7':'5-7h','gt7':'>7h' };
  statHours.innerText = hoursMap[answers.hours] || '‚Äî';
  const insomniaMap = { 'freq':'Frequente','ocas':'Ocasional','nao':'N√£o' };
  statInsomnia.innerText = insomniaMap[answers.insomnia] || '‚Äî';
  const phoneMap = { 'sempre':'Sempre','asvezes':'√Äs vezes','nunca':'Raramente' };
  statPhone.innerText = phoneMap[answers.phone] || '‚Äî';
  const restMap = { 'sim':'Sim','asvezes':'√Äs vezes','nao':'N√£o' };
  statRest.innerText = restMap[answers.rested] || '‚Äî';

  // compose summary suggestions
  let summary = '';
  if(answers.insomnia === 'freq'){
    summary += 'Sinais de ins√¥nia frequente. ';
  } else if(answers.hours === 'lt5'){
    summary += 'Seu tempo de sono √© baixo. ';
  } else {
    summary += 'Seu sono parece dentro do esperado. ';
  }
  if(answers.phone === 'sempre') summary += 'Reduza telas 60min antes de dormir. ';
  if(answers.rested === 'nao') summary += 'Tente rotina fixa de hor√°rio. ';

  // show summary (not displayed as block but used in modal if needed)
  resultTitle.innerText = 'Resumo gratuito';
  document.getElementById('greetSub').innerText = summary || 'Pequenos ajustes podem melhorar seu sono.';

  // draw sleep chart with score based on answers
  const sleepScore = calcSleepScore();
  drawChart(sleepScore);

  // after short delay, open plans CTA (simulate app behavior)
}

/* compute a simple sleep score 0-100 */
function calcSleepScore(){
  // start 80
  let score = 80;
  if(answers.hours === 'lt5') score -= 40;
  if(answers.hours === '5_7') score -= 10;
  if(answers.insomnia === 'freq') score -= 30;
  if(answers.phone === 'sempre') score -= 10;
  if(answers.rested === 'sim') score += 6;
  score = Math.max(8, Math.min(98, Math.round(score)));
  return score;
}

/* draw donut chart */
function drawChart(value){
  const ctx = document.getElementById('chartSleep').getContext('2d');
  if(sleepChart) sleepChart.destroy();
  sleepChart = new Chart(ctx, {
    type:'doughnut',
    data:{ datasets:[{ data:[value, 100-value], backgroundColor:['#5c32e5','#15141a'], borderWidth:0 }]},
    options:{
      cutout: '68%',
      plugins:{legend:{display:false},tooltip:{enabled:false}},
      elements:{arc:{borderWidth:0}}
    }
  });
}

/* ---------- Plans logic ---------- */
function openPlans(){
  plansModalOpen(true);
}
function plansModalOpen(open){
  if(open){
    plansModal.classList.add('open');
    plansModal.setAttribute('aria-hidden','false');
    // change buyBtn behavior to start checkout
    buyBtn.onclick = ()=> {
      const plan = planAnnual.classList.contains('selected') ? 'Anual' : 'Mensal';
      // replace alert with redirect to your Mercado Pago link
      alert(`Iniciando checkout para: ${plan}\nSubstitua este alert pelo link real do Mercado Pago.`);
    };
  } else {
    plansModal.classList.remove('open');
    plansModal.setAttribute('aria-hidden','true');
  }
}

/* plan selection toggles */
planAnnual.addEventListener('click', ()=>{ planAnnual.classList.add('selected'); planMonthly.classList.remove('selected'); });
planMonthly.addEventListener('click', ()=>{ planMonthly.classList.add('selected'); planAnnual.classList.remove('selected'); });

/* ---------- Initial state ---------- */
showStep(0);

/* Accessibility: keyboard */
document.addEventListener('keydown', (e)=>{
  if(e.key === 'ArrowRight') nextStep();
  if(e.key === 'ArrowLeft') prevStep();
});

/* Prevent accidental zoom (pinch) - best-effort */
document.addEventListener('gesturestart', function(e){ e.preventDefault(); });

/* Ensure footer Next is disabled until valid; wire click on Next to nextStep when enabled */
nextBtn.addEventListener('click', (ev)=>{
  if(nextBtn.classList.contains('disabled')) ev.preventDefault();
});

/* Make sure progress / topbar shown when start clicked */
startBtn.addEventListener('click', ()=>{
  // small animation: show topbar after a tick
  setTimeout(()=>{ topbar.style.display = 'flex'; footer.style.display = 'flex'; }, 200);
});

/* click on screen option also tries to go next automatically after selection for speed */
const autoAdvance = true; // set to false if you want user to manually press next
[insomniaOpts, phoneOpts, hoursOpts, restedOpts].forEach(container=>{
  container.querySelectorAll('.option').forEach(opt=>{
    opt.addEventListener('click', ()=>{
      if(autoAdvance){
        setTimeout(()=>{ nextStep(); }, 220); // short delay to show selection
      }
    });
  });
});

/* ensure inputs pressing enter triggers next */
[nameInput, ageInput, weightInput].forEach(inp=>{
  if(!inp) return;
  inp.addEventListener('keydown', (e)=>{
    if(e.key === 'Enter' && validateCurrent()) nextStep();
  });
});
/* bot√£o para abrir planos manualmente */
const seePlansBtn = document.getElementById('seePlansBtn');
if (seePlansBtn) {
  seePlansBtn.addEventListener('click', ()=> openPlans());
}
</script>
</body>
</html>
