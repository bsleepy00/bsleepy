<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>BSLEEPY ‚Äî Quiz & Plano</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  /* reset + base */
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%}
  body{
    font-family:'Poppins',sans-serif;
    background:#fafafa;
    display:flex;
    align-items:flex-start;
    justify-content:center;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    padding:20px 0;
  }
  .wrap{
    width:100%;
    max-width:420px; /* mobile app width */
    min-height:100vh;
    background:#fff;
    border-radius:18px;
    box-shadow:0 10px 30px rgba(10,10,10,0.06);
    overflow:hidden;
    position:relative;
  }

  /* Header (top bar) */
  .topbar{
    height:64px;
    display:flex;
    align-items:center;
    gap:12px;
    padding:10px 18px;
  }
  .back{
    width:36px;height:36px;border-radius:10px;
    display:flex;align-items:center;justify-content:center;
    cursor:pointer;
    transition:all .18s;
  }
  .back:hover{transform:translateX(-3px)}
  .progress-shell{
    flex:1;height:8px;background:#eee;border-radius:999px;overflow:hidden;
  }
  .progress{height:100%;width:0;background:linear-gradient(90deg,#5C32E5,#8A5CFF);transition:width .35s ease}

  /* Screens */
  .screen{
    position:absolute;
    inset:64px 0 0 0;
    padding:26px;
    transform:translateX(100%);
    opacity:0;
    pointer-events:none;
    transition:all .36s cubic-bezier(.2,.9,.25,1);
    display:flex;
    flex-direction:column;
    gap:18px;
    overflow:auto;
    -webkit-overflow-scrolling:touch;
  }
  .screen.active{transform:translateX(0);opacity:1;pointer-events:all}
  .screen.left{transform:translateX(-20%);opacity:0}
  .title{
    text-align:center;
    margin-top:8px;
  }
  .title h1{font-size:20px;font-weight:700;color:#111}
  .title p{font-size:13px;color:#777;margin-top:6px}

  /* Card input / options */
  .card{
    background:#fff;border-radius:14px;padding:16px;
    box-shadow:0 6px 18px rgba(25,15,45,0.05);
  }
  input[type="text"], input[type="number"]{
    width:100%;padding:14px;border-radius:12px;border:1px solid #eee;font-size:15px;
    outline:none;transition:box-shadow .15s,border-color .15s;
  }
  input:focus{border-color:#d9cfff;box-shadow:0 4px 18px rgba(92,50,229,0.06)}
  .options{display:flex;flex-direction:column;gap:12px;margin-top:8px}
  .option{
    background:#f6f6f8;padding:14px;border-radius:14px;font-weight:600;display:flex;align-items:center;gap:10px;
    cursor:pointer;border:1px solid transparent;transition:all .18s;
  }
  .option.small{padding:10px;font-weight:600}
  .option:hover{transform:translateY(-3px)}
  .option.selected{background:#0b0b0b;color:#fff;border:1px solid rgba(92,50,229,0.12);box-shadow:0 8px 30px rgba(92,50,229,0.08)}

  /* Footer (fixed) */
  .footer{
    position:sticky;bottom:0;background:linear-gradient(0deg, rgba(255,255,255,0.85), rgba(255,255,255,0.9));padding:16px 26px;
    border-top:1px solid rgba(10,10,10,0.03);display:flex;gap:12px;align-items:center;justify-content:space-between;
  }
  .btn{
    width:100%;padding:14px;border-radius:14px;border:0;font-weight:700;font-size:15px;cursor:pointer;
    transition:transform .12s,opacity .12s;
  }
  .btn.primary{background:linear-gradient(90deg,#6f46ff,#5c32e5);color:#fff;box-shadow:0 10px 30px rgba(92,50,229,0.12)}
  .btn.ghost{background:transparent;color:#111;border:1px solid #eee}
  .btn:active{transform:translateY(1px)}
  .btn.disabled{opacity:.45;cursor:not-allowed;transform:none}

  /* Result dashboard */
  .dashboard{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  .dash-card{background:#fff;border-radius:14px;padding:12px;text-align:center;box-shadow:0 8px 20px rgba(12,12,30,0.04)}
  .dash-card h4{font-size:13px;color:#666;margin-bottom:8px}
  .big-card{grid-column:1/-1;padding:18px;display:flex;gap:16px;align-items:center;justify-content:space-between}

  .big-left{flex:1}
  .greet{font-weight:700;font-size:18px}
  .sub{font-size:13px;color:#666;margin-top:6px}

  /* modal plans bottom sheet */
  .plans-modal{
    position:fixed;left:0;right:0;bottom:0;background:linear-gradient(180deg,#fff,#fbf7ff);
    border-top-left-radius:18px;border-top-right-radius:18px;padding:18px;box-shadow:0 -10px 60px rgba(25,10,70,0.12);
    transform:translateY(110%);transition:transform .36s cubic-bezier(.2,.9,.25,1);z-index:80;
  }
  .plans-modal.open{transform:translateY(0)}
  .plan-row{display:flex;align-items:center;justify-content:space-between;padding:14px;border-radius:12px;border:1px solid #eee;margin-bottom:10px;background:#fff}
  .plan-row.selected{border:2px solid #5C32E5;box-shadow:0 10px 30px rgba(92,50,229,0.07)}
  .plan-badge{background:#111;color:#fff;padding:6px 10px;border-radius:999px;font-size:11px;margin-bottom:8px;display:inline-block}

  /* small helpers */
  .muted{color:#7b7b88;font-size:13px}
  .center{text-align:center}
  .chip{display:inline-block;padding:6px 10px;border-radius:999px;background:#f1f0ff;color:#4b2aff;font-weight:700;font-size:12px}

  /* animations for choice icons */
  .pulse{animation:pulse .9s infinite alternate}
  @keyframes pulse{from{transform:scale(1)}to{transform:scale(1.02)}}

  /* responsive tweaks */
  @media (max-width:420px){
    .wrap{border-radius:0;min-height:100vh}
    .topbar{height:72px;padding:12px}
    .screen{inset:72px 0 0 0;padding:20px}
  }
</style>
</head>
<body>
  <div class="wrap" role="application" aria-label="BSLEEPY quiz app">
    <!-- topbar -->
    <div class="topbar">
      <div class="back" id="backBtn" title="Voltar">&#8249;</div>
      <div class="progress-shell" aria-hidden>
        <div class="progress" id="progressBar" style="width:0%"></div>
      </div>
    </div>

    <!-- SCREEN: Intro -->
    <div class="screen active" id="screen-intro">
      <div class="title center">
        <h1>BSLEEPY</h1>
        <p>Descubra o seu perfil de sono e receba um resumo gratuito.</p>
      </div>

      <div class="card center" style="background:linear-gradient(180deg,#f7f5ff,#fff);">
        <img src="https://via.placeholder.com/120x120/5C32E5/FFFFFF?text=BS" alt="logo" style="display:block;margin:0 auto 10px;border-radius:16px">
        <div style="font-weight:700;font-size:16px">Comece sua jornada</div>
        <div class="muted" style="margin-top:8px">Responda rapidamente ‚Äî leva menos de 1 minuto.</div>
      </div>

      <div class="card">
        <div style="display:flex;gap:10px;align-items:center">
          <div style="flex:1">
            <div style="font-weight:700">Quer feedback di√°rio?</div>
            <div class="muted" style="margin-top:6px">Ative depois nos planos para receber rotinas e relat√≥rios.</div>
          </div>
          <div><span class="chip">Gr√°tis</span></div>
        </div>
      </div>
    </div>

    <!-- SCREEN: Pergunta 1 Nome -->
    <div class="screen" id="screen-q1">
      <div class="title">
        <h1>Primeiro, qual √© seu nome?</h1>
        <p>Vamos te chamar pelo nome nos resultados.</p>
      </div>

      <div class="card">
        <input type="text" id="inputName" placeholder="Ex: Ana" autocomplete="name" aria-label="Nome">
      </div>
    </div>

    <!-- SCREEN: Pergunta 2 Idade -->
    <div class="screen" id="screen-q2">
      <div class="title">
        <h1>Qual sua idade?</h1>
        <p>Isso ajuda a personalizar recomenda√ß√µes.</p>
      </div>

      <div class="card">
        <input type="number" id="inputAge" min="10" max="120" placeholder="Ex: 28" aria-label="Idade">
      </div>
    </div>

    <!-- SCREEN: Pergunta 3 Ins√¥nia -->
    <div class="screen" id="screen-q3">
      <div class="title">
        <h1>Voc√™ sofre de ins√¥nia?</h1>
        <p>Escolha a op√ß√£o que mais se aplica.</p>
      </div>

      <div class="card">
        <div class="options" id="insomniaOpts">
          <div class="option" data-value="freq">Sim, frequentemente</div>
          <div class="option" data-value="ocas">√Äs vezes</div>
          <div class="option" data-value="nao">N√£o</div>
        </div>
      </div>
    </div>

    <!-- SCREEN: Pergunta 4 Horas sono -->
    <div class="screen" id="screen-q4">
      <div class="title">
        <h1>Quantas horas costuma dormir por noite?</h1>
        <p>Tente estimar uma m√©dia semanal.</p>
      </div>

      <div class="card">
        <div class="options" id="hoursOpts">
          <div class="option" data-value="lt5">Menos de 5h</div>
          <div class="option" data-value="5_7">Entre 5h e 7h</div>
          <div class="option" data-value="gt7">Mais de 7h</div>
        </div>
      </div>
    </div>

    <!-- SCREEN: Pergunta 5 Atividade f√≠sica -->
    <div class="screen" id="screen-q5">
      <div class="title">
        <h1>Qual seu n√≠vel de atividade f√≠sica?</h1>
        <p>Isso afeta sono e recupera√ß√£o.</p>
      </div>

      <div class="card">
        <div class="options" id="activityOpts">
          <div class="option" data-value="sed">Sedent√°rio</div>
          <div class="option" data-value="lev">Levemente ativo</div>
          <div class="option" data-value="mod">Moderadamente ativo</div>
          <div class="option" data-value="alt">Ativo</div>
          <div class="option" data-value="muito">Muito ativo</div>
        </div>
      </div>
    </div>

    <!-- SCREEN: Resultado -->
    <div class="screen" id="screen-result">
      <div class="title">
        <h1 id="greeting">Resumo do seu sono</h1>
        <p id="subtitle">Um panorama r√°pido com dicas b√°sicas.</p>
      </div>

      <div class="card big-card">
        <div class="big-left">
          <div class="greet" id="resultName">Ol√°!</div>
          <div class="sub" id="resultSummary">Carregando seu resumo‚Ä¶</div>
        </div>
        <div style="width:110px;text-align:center">
          <canvas id="sleepChart" width="110" height="110"></canvas>
        </div>
      </div>

      <div class="dashboard">
        <div class="dash-card">
          <h4>Hidrata√ß√£o</h4>
          <div style="font-weight:700;font-size:20px">2.3L</div>
          <div class="muted" style="margin-top:6px">Meta: 2.5L</div>
        </div>
        <div class="dash-card">
          <h4>Relaxamento</h4>
          <div style="font-weight:700;font-size:20px" id="relaxVal">‚Äî</div>
          <div class="muted" style="margin-top:6px">N√≠vel noturno</div>
        </div>
        <div class="dash-card">
          <h4>Dura√ß√£o</h4>
          <div style="font-weight:700;font-size:20px" id="hoursVal">‚Äî</div>
          <div class="muted" style="margin-top:6px">Horas por noite</div>
        </div>
        <div class="dash-card">
          <h4>Atividade</h4>
          <div style="font-weight:700;font-size:20px" id="activityVal">‚Äî</div>
          <div class="muted" style="margin-top:6px">N√≠vel</div>
        </div>
      </div>
    </div>

    <!-- footer / navigation -->
    <div class="footer" id="footer">
      <div style="width:12px"></div>
      <button class="btn ghost" id="btnBack">Voltar</button>
      <button class="btn primary disabled" id="btnNext">Continuar</button>
    </div>

    <!-- Plans modal -->
    <div class="plans-modal" id="plansModal" aria-hidden="true">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
        <div>
          <div style="font-weight:800;font-size:18px">Monitore diariamente</div>
          <div class="muted" style="margin-top:6px">Plano com rotina personalizada e relat√≥rios</div>
        </div>
        <div style="font-size:12px;color:#999">R$ 12,49 / m√™s</div>
      </div>

      <div class="plan-row selected" id="planAnnual">
        <div>
          <div class="plan-badge">ECONOMIZE 60%</div>
          <div style="font-weight:700">Plano anual</div>
          <div class="muted" style="font-size:13px">Pagamento √∫nico ‚Äî melhor custo</div>
        </div>
        <div style="text-align:right">
          <div style="font-weight:800">R$ 12,49</div>
          <div class="muted">por m√™s</div>
        </div>
      </div>

      <div class="plan-row" id="planMonthly">
        <div>
          <div style="font-weight:700">Plano mensal</div>
          <div class="muted" style="font-size:13px">Cancelamento a qualquer momento</div>
        </div>
        <div style="text-align:right">
          <div style="font-weight:800">R$ 37,90</div>
          <div class="muted">por m√™s</div>
        </div>
      </div>

      <button class="btn primary" id="btnStartPlan" style="margin-top:8px">COME√áAR MINHA JORNADA üîí</button>
      <div style="display:flex;gap:12px;justify-content:center;margin-top:10px">
        <a class="muted" href="#" style="font-size:12px">Termos</a>
        <a class="muted" href="#" style="font-size:12px">Privacidade</a>
      </div>
    </div>
  </div>

<script>
/* App state */
const state = {
  stepIndex: 0,
  steps: ['intro','q1','q2','q3','q4','q5','result'],
  answers: { name:'', age:'', insomnia:'', hours:'', activity:'' }
}

/* screens */
const screens = {
  intro: document.getElementById('screen-intro'),
  q1: document.getElementById('screen-q1'),
  q2: document.getElementById('screen-q2'),
  q3: document.getElementById('screen-q3'),
  q4: document.getElementById('screen-q4'),
  q5: document.getElementById('screen-q5'),
  result: document.getElementById('screen-result')
}

/* UI elements */
const progressBar = document.getElementById('progressBar');
const btnNext = document.getElementById('btnNext');
const btnBack = document.getElementById('btnBack');
const backBtn = document.getElementById('backBtn');

/* inputs */
const inputName = document.getElementById('inputName');
const inputAge = document.getElementById('inputAge');

/* option containers */
const insomniaOpts = document.getElementById('insomniaOpts');
const hoursOpts = document.getElementById('hoursOpts');
const activityOpts = document.getElementById('activityOpts');

/* result UI */
const greeting = document.getElementById('greeting');
const resultName = document.getElementById('resultName');
const resultSummary = document.getElementById('resultSummary');
const hoursVal = document.getElementById('hoursVal');
const activityVal = document.getElementById('activityVal');
const relaxVal = document.getElementById('relaxVal');

/* plans */
const plansModal = document.getElementById('plansModal');
const planAnnual = document.getElementById('planAnnual');
const planMonthly = document.getElementById('planMonthly');
const btnStartPlan = document.getElementById('btnStartPlan');

/* Chart placeholders */
let sleepChart = null;

/* helpers */
function showScreen(key){
  // hide all
  Object.values(screens).forEach(s => s.classList.remove('active'));
  // show requested
  screens[key].classList.add('active');
  // progress
  const stepNum = state.steps.indexOf(key);
  state.stepIndex = Math.max(0, stepNum);
  const pct = Math.round((stepNum) / (state.steps.length - 1) * 100);
  progressBar.style.width = pct + '%';
  validateCurrent(); // validate for next button
  // scroll top for mobile comfort
  window.scrollTo({top:0,behavior:'smooth'});
}

function validateCurrent(){
  const key = state.steps[state.stepIndex];
  let valid=false;
  if(key==='intro') valid=true;
  if(key==='q1') valid = inputName.value.trim().length >= 2;
  if(key==='q2') valid = inputAge.value && Number(inputAge.value) >= 10;
  if(key==='q3') valid = !!state.answers.insomnia;
  if(key==='q4') valid = !!state.answers.hours;
  if(key==='q5') valid = !!state.answers.activity;
  if(key==='result') valid=true;
  toggleNext(valid);
}

function toggleNext(enable){
  if(enable){
    btnNext.classList.remove('disabled');
    btnNext.disabled = false;
  } else {
    btnNext.classList.add('disabled');
    btnNext.disabled = true;
  }
}

/* next/back logic */
btnNext.addEventListener('click', () => {
  if(btnNext.classList.contains('disabled')) return;
  const current = state.steps[state.stepIndex];
  // save inputs depending on step
  if(current==='q1'){ state.answers.name = inputName.value.trim(); }
  if(current==='q2'){ state.answers.age = inputAge.value.trim(); }
  // move to next
  const nextIndex = Math.min(state.stepIndex + 1, state.steps.length - 1);
  const next = state.steps[nextIndex];
  showScreen(next);
  if(next === 'result') renderResult();
});
btnBack.addEventListener('click', () => navigateBack());
backBtn.addEventListener('click', () => navigateBack());
function navigateBack(){
  const prevIndex = Math.max(0, state.stepIndex - 1);
  showScreen(state.steps[prevIndex]);
}

/* input listeners */
[inputName, inputAge].forEach(el => el.addEventListener('input', validateCurrent));

/* option selection utility */
function wireOptions(container, answerKey){
  container.querySelectorAll('.option').forEach(opt => {
    opt.addEventListener('click', (e)=>{
      // clear other selected
      container.querySelectorAll('.option').forEach(o=>o.classList.remove('selected'));
      opt.classList.add('selected');
      state.answers[answerKey] = opt.getAttribute('data-value');
      validateCurrent();
    });
  });
}
wireOptions(insomniaOpts,'insomnia');
wireOptions(hoursOpts,'hours');
wireOptions(activityOpts,'activity');

/* result rendering (logic dynamic) */
function renderResult(){
  const name = state.answers.name || 'Amigo';
  const age = Number(state.answers.age) || null;
  const insomnia = state.answers.insomnia;
  const hours = state.answers.hours;
  const activity = state.answers.activity;

  // friendly greeting
  greeting.innerText = 'Seu Plano Personalizado';
  resultName.innerText = `Ol√°, ${name}!`;
  // hours mapping
  let hoursText = '‚Äî';
  let sleepScore = 70;
  if(hours==='lt5'){ hoursText = 'Menos de 5h'; sleepScore=28; }
  if(hours==='5_7'){ hoursText = 'Entre 5h e 7h'; sleepScore=66; }
  if(hours==='gt7'){ hoursText = 'Mais de 7h'; sleepScore=94; }

  // activity mapping
  const activityMap = { sed:'Sedent√°rio', lev:'Levemente ativo', mod:'Moderado', alt:'Ativo', muito:'Muito ativo' };
  activityVal.innerText = activityMap[activity] || '‚Äî';
  hoursVal.innerText = hoursText;

  // relax estimation
  let relaxScore = 60;
  if(insomnia==='freq') relaxScore = 32;
  if(insomnia==='ocas') relaxScore = 58;
  if(insomnia==='nao') relaxScore = 82;
  relaxVal.innerText = relaxScore + '%';

  // summary text (personalized)
  let summary = '';
  if(insomnia==='freq'){
    summary = 'Detectamos sinais de ins√¥nia frequente. Experimente rotina de higiene do sono: evite telas 60 min antes, mantenha hor√°rio regular e pratique t√©cnicas de relaxamento.';
  } else if(hours==='lt5'){
    summary = 'Seu tempo de sono √© baixo. Procure aumentar gradualmente sua dura√ß√£o (30‚Äì60 min por semana) e evite cafe√≠na ap√≥s 16h.';
  } else if(hours==='5_7'){
    summary = 'Sono razo√°vel ‚Äî com pequenos ajustes na rotina noturna voc√™ pode melhorar a qualidade.';
  } else {
    summary = '√ìtimo! Voc√™ tem boas horas de sono. Mantenha rotina e h√°bitos saud√°veis para conservar a qualidade.';
  }
  // add age/activity hints
  if(age && age >= 60){
    summary += ' Como tem mais de 60 anos, fale com seu m√©dico se tiver despertares frequentes.';
  }
  if(activity==='sed'){
    summary += ' Incorporar exerc√≠cio leve durante o dia pode melhorar a qualidade do sono.';
  }

  resultSummary.innerText = summary;

  // render chart
  drawSleepChart(sleepScore, relaxScore);

  // show 'open plans' after a pause? we show button to open modal in footer to simulate app experience
  setTimeout(()=>{ openPlansUI(); }, 700);
}

/* Chart render (doughnut) */
function drawSleepChart(sleepScore, relaxScore){
  const ctx = document.getElementById('sleepChart').getContext('2d');
  if(sleepChart) sleepChart.destroy();
  sleepChart = new Chart(ctx, {
    type:'doughnut',
    data:{
      datasets:[{
        data:[sleepScore, 100 - sleepScore],
        backgroundColor:['#5C32E5','#eee'],
        borderWidth:0
      }]
    },
    options:{
      cutout:'70%',
      plugins:{
        tooltip:{enabled:false},
        legend:{display:false},
        beforeDraw: function() {}
      }
    }
  });
}

/* Plans modal logic */
function openPlansUI(){
  plansModal.classList.add('open'); plansModal.setAttribute('aria-hidden','false');
  // footer 'Continue' button becomes "Ver planos"
  btnNext.innerText = 'Ver planos';
  btnNext.onclick = ()=>{ plansModal.classList.add('open'); plansModal.setAttribute('aria-hidden','false'); };
  // change back button to close modal if open
  btnBack.onclick = ()=>{ plansModal.classList.toggle('open'); };
}

/* Plan selection */
planAnnual.addEventListener('click', ()=>{ planAnnual.classList.add('selected'); planMonthly.classList.remove('selected'); });
planMonthly.addEventListener('click', ()=>{ planMonthly.classList.add('selected'); planAnnual.classList.remove('selected'); });

btnStartPlan.addEventListener('click', ()=>{
  // Simula checkout ‚Äî aqui voc√™ substitui pelo link do MP / checkout real
  const selected = planAnnual.classList.contains('selected') ? 'ANUAL' : 'MENSAL';
  alert('Iniciando checkout ‚Äî plano selecionado: ' + selected + '\n(Substitua aqui pelo seu link do Mercado Pago)');
});

/* Initial navigation: show intro then q1 via next click */
showScreen('intro');

/* Make navigation via footer Next also respond to Enter on inputs */
[inputName, inputAge].forEach(el=>{
  el.addEventListener('keydown', (e)=>{
    if(e.key === 'Enter' && !btnNext.classList.contains('disabled')){
      btnNext.click();
    }
  });
});

/* Prevent pinch-zoom on mobile via touch-action (best-effort) */
document.addEventListener('touchmove', function(e){ /* allow scrolling */ }, {passive:true});

/* Accessibility: keyboard friendly quick nav */
document.addEventListener('keydown', (e)=>{
  if(e.key === 'ArrowRight'){ btnNext.click(); }
  if(e.key === 'ArrowLeft'){ navigateBack(); }
});

/* ensure step sync if user clicks top progress back */
progressBar.addEventListener('click', ()=>{}); /* kept for extensibility */
</script>
</body>
</html>
